<!--<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Leaderboard</title>
</head>
<body>-->
<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2Mw1T" crossorigin="anonymous">
<style>
body {
    background-color: #f4f4f4;
    text-align: center;
    margin: 0;
    padding: 0;
    font-family: 'Roboto', sans-serif;
}
h1 {
    margin-top: 20px;
    color: #333;
}
.first-row {
    background-color: gold !important;
}
.second-row {
    background-color: 	#C0C0C0 !important;
}
.third-row {
    background-color: #cd7f32 !important;
}
</style>
<div class="container">
    <h1 style="font-size: 60px;">Leaderboard</h1>
    <table id="leaderboardTable" class="table table-lg table-striped">
        <thead class="thead-dark">
            <tr style="font-size: 25px;">
                <th>#</th>
                <th>Username</th>
                <th>Points</th>
            </tr>
        </thead>
        <tbody style="font-size: 20px; background-color: lightgrey;">
        </tbody>
    </table>
</div>
<script>
    function loadLeaderboard() {
        var xhr = new XMLHttpRequest();
        xhr.open('GET', '/lbm/board/json/leaderboard', true);

        xhr.onload = function() {
            if (this.status === 200) {
                var users = JSON.parse(this.responseText);
                users.sort(function(a, b) {
                    return b.dbUser.score - a.dbUser.score;
                });
                var tableBody = document.getElementById('leaderboardTable').getElementsByTagName('tbody')[0];
                var rowIndex = 1;
                    users.forEach(function(user) {
                        var row = tableBody.insertRow();
                        var cellNumber = row.insertCell(0);
                        var cell1 = row.insertCell(1);
                        var cell2 = row.insertCell(2);
                        cellNumber.textContent = rowIndex++;
                        cell1.textContent = user.dbUser.username;
                        cell2.textContent = user.dbUser.score;
                    });
                    if (tableBody.rows.length > 0) {
                        tableBody.rows[0].classList.add('first-row');
                        tableBody.rows[1].classList.add('second-row');
                        tableBody.rows[2].classList.add('third-row');
                    }
            } else {
                console.error('Błąd ładowania leaderboarda:', this.statusText);
            }
        };

        xhr.onerror = function() {
            console.error('Błąd połączenia z serwerem.');
        };

        xhr.send();
    }

    document.addEventListener('DOMContentLoaded', loadLeaderboard);
</script>
<!--</body>
</html>-->
